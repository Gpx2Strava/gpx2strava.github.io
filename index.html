<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPX2Strava - Create Custom Running Routes</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.css" />
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>GPX2Strava</h1>
            <p class="subtitle">Create custom running routes and export as GPX files</p>
        </header>

        <div class="main-content">
            <div class="map-section">
                <div class="map-controls">
                    <div id="searchContainer" class="search-container">
                        <input type="text" id="locationSearch" placeholder="Search for a location..." />
                    </div>
                    <div class="shape-selector">
                        <button class="shape-btn active" data-shape="draw" id="drawBtn">Draw Route</button>
                    </div>
                    <div class="map-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="showWaypoints" checked>
                            <span>Show Waypoints</span>
                        </label>
                        <div class="map-actions">
                            <button id="snapToRoadBtn" class="btn btn-warning" disabled>
                                <span class="btn-icon">üõ£Ô∏è</span> Align Path to Road
                            </button>
                            <button id="clearBtn" class="btn btn-secondary">Clear</button>
                        </div>
                    </div>
                </div>
                <div id="map"></div>
            </div>

            <div class="sidebar">
                <div class="sidebar-section">
                    <h3>Data Visualization</h3>
                    <div class="chart-container">
                        <h4>Pace Profile</h4>
                        <canvas id="paceChart"></canvas>
                        <p class="chart-info" id="paceInfo">Average: 5.50 min/km</p>
                    </div>
                    <div class="chart-container">
                        <h4>Elevation Profile</h4>
                        <canvas id="elevationChart"></canvas>
                        <p class="chart-info" id="elevationInfo">Total Gain: 0m</p>
                    </div>
                </div>

                <div class="sidebar-section">
                    <div class="section-header">
                        <h3>Run Details</h3>
                        <div class="activity-toggle">
                            <button class="toggle-btn active" data-activity="run">Run</button>
                            <button class="toggle-btn" data-activity="bike">Bike</button>
                        </div>
                    </div>

                    <div class="run-stats">
                        <h4>Run Stats</h4>
                        <div class="stats-grid-enhanced">
                            <div class="stat-item-enhanced">
                                <div class="stat-icon">üìè</div>
                                <div class="stat-content">
                                    <div class="stat-value" id="distance">0</div>
                                    <div class="stat-label">Distance</div>
                                </div>
                            </div>
                            <div class="stat-item-enhanced">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-content">
                                    <div class="stat-value" id="duration">0:00</div>
                                    <div class="stat-label">Duration</div>
                                </div>
                            </div>
                            <div class="stat-item-enhanced">
                                <div class="stat-icon">‚õ∞Ô∏è</div>
                                <div class="stat-content">
                                    <div class="stat-value" id="elevationGain">0m</div>
                                    <div class="stat-label">Elevation Gain</div>
                                </div>
                            </div>
                            <div class="stat-item-enhanced" id="paceStatItem">
                                <div class="stat-icon">üèÉ</div>
                                <div class="stat-content">
                                    <div class="stat-value" id="pace">5.50</div>
                                    <div class="stat-label">Pace</div>
                                </div>
                            </div>
                            <div class="stat-item-enhanced" id="speedStatItem" style="display: none;">
                                <div class="stat-icon">üö¥</div>
                                <div class="stat-content">
                                    <div class="stat-value" id="speed">0</div>
                                    <div class="stat-label">Speed</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pace/Speed Unit and Input (shown based on activity type) -->
                    <div class="form-group" id="paceUnitGroup">
                        <label>Pace Unit</label>
                        <select id="paceUnit" class="form-select">
                            <option value="min/km">min/km</option>
                            <option value="min/mile">min/mile</option>
                        </select>
                    </div>

                    <div class="form-group" id="speedUnitGroup" style="display: none;">
                        <label>Speed Unit</label>
                        <select id="speedUnit" class="form-select">
                            <option value="km/h">km/h</option>
                            <option value="mph">mph</option>
                        </select>
                    </div>

                    <div class="form-group" id="paceInputGroup">
                        <label>
                            <span class="label-icon">üèÉ</span> Average Pace (<span id="paceUnitLabel">min/km</span>)
                        </label>
                        <div class="slider-container">
                            <input type="range" id="paceSlider" min="3" max="15" step="0.1" value="5.50">
                            <span class="slider-value" id="paceValue">5.50</span>
                        </div>
                        <input type="number" id="paceInput" value="5.50" step="0.1" min="3" max="15" class="pace-input-number">
                    </div>

                    <div class="form-group" id="speedInputGroup" style="display: none;">
                        <label>
                            <span class="label-icon">üö¥</span> Average Speed (<span id="speedUnitLabel">km/h</span>)
                        </label>
                        <div class="slider-container">
                            <input type="range" id="speedSlider" min="10" max="40" step="0.5" value="20.00">
                            <span class="slider-value" id="speedValue">20.00</span>
                        </div>
                        <input type="number" id="speedInput" value="20.00" step="0.5" min="10" max="40" class="pace-input-number">
                    </div>

                    <div class="form-group">
                        <label>
                            <span class="label-icon">üîÄ</span> <span id="inconsistencyLabel">Pace</span> Inconsistency
                        </label>
                        <div class="slider-container">
                            <input type="range" id="paceInconsistency" min="0" max="30" value="0">
                            <span class="slider-value" id="paceInconsistencyValue">0%</span>
                        </div>
                        <p class="help-text" id="inconsistencyHelpText">Constant pace throughout the run (most efficient)</p>
                    </div>

                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="includeHeartRate" checked>
                            <span class="label-icon">‚ù§Ô∏è</span> Include Heart Rate Data
                        </label>
                    </div>

                    <div class="form-group" id="heartRateGroup" style="display: none;">
                        <label>
                            <span class="label-icon">‚ù§Ô∏è</span> Average Heart Rate
                        </label>
                        <div class="slider-container">
                            <input type="range" id="heartRateSlider" min="100" max="200" step="1" value="150">
                            <span class="slider-value" id="heartRateValue">150</span> <span>bpm</span>
                        </div>
                        <p class="help-text" id="heartRateHelpText">Moderate intensity, steady effort</p>
                    </div>

                    <div class="form-group" id="heartRateVariabilityGroup" style="display: none;">
                        <label>
                            <span class="label-icon">‚ö°</span> Heart Rate Variability
                        </label>
                        <div class="slider-container">
                            <input type="range" id="heartRateVariability" min="0" max="30" step="1" value="10">
                            <span class="slider-value" id="heartRateVariabilityValue">10%</span>
                        </div>
                        <p class="help-text">Moderate heart rate changes (realistic for varied terrain)</p>
                    </div>

                    <div class="form-group">
                        <label>Run Name</label>
                        <input type="text" id="runName" placeholder="My Running Route">
                    </div>

                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="runDate">
                    </div>

                    <div class="form-group">
                        <label>Start Time</label>
                        <input type="time" id="startTime">
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="description" rows="3" placeholder="Add a description..."></textarea>
                    </div>

                    <button id="exportBtn" class="btn btn-success btn-block" disabled>Download GPX File</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-draw@1.0.4/dist/leaflet.draw.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder@1.13.0/dist/Control.Geocoder.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>

